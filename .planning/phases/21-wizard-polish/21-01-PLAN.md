---
phase: 21-wizard-polish
plan: 1
type: execute
---

<objective>
Polish wizard with clearer German labels, "herzlich" tone, and business-specific AI-generated content.

Purpose: Transform wizard from functional-but-technical to warm and guided experience for German small business owners.
Output: Updated wizard steps with German labels/hints, improved AI prompts generating business-specific "herzlich" content.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-wizard-polish/21-CONTEXT.md

**Codebase constraints:**
- Tailwind CSS v4 with OKLCH colors
- German language with Sie-form required
- Voice step already localized (Phase 20), follow same patterns

**Phase context from 21-CONTEXT.md:**
- "herzlich" (warm-hearted) tone, not "förmlich" (formal/stiff)
- Business-specific FAQs (restaurant vs salon vs clinic)
- Clearer step guidance with friendly labels
- Out of scope: visual design changes, new steps

**Relevant source files:**
@src/components/wizard/wizard-progress.tsx
@src/components/wizard/steps/business-info-step.tsx
@src/components/wizard/steps/knowledge-step.tsx
@src/components/wizard/steps/greeting-step.tsx
@src/components/wizard/steps/review-step.tsx
@src/lib/openrouter.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: German-localize wizard labels and step descriptions</name>
  <files>src/components/wizard/wizard-progress.tsx, src/components/wizard/steps/business-info-step.tsx, src/components/wizard/steps/knowledge-step.tsx, src/components/wizard/steps/greeting-step.tsx, src/components/wizard/steps/review-step.tsx</files>
  <action>
Update all wizard UI text to German:

1. **wizard-progress.tsx** - Update STEP_LABELS array:
   - "Business Info" → "Ihr Unternehmen" (Your Business)
   - "Knowledge" → "Wissen & FAQs" (Knowledge & FAQs)
   - "Voice" → "Stimme" (already done in Phase 20, verify)
   - "Greeting" → "Begruessung" (Greeting)
   - "Review" → "Uebersicht" (Overview)

2. **business-info-step.tsx** - Localize completely:
   - Title: "Business Information" → "Ueber Ihr Unternehmen"
   - Subtitle: "Tell us about your business..." → "Erzaehlen Sie uns von Ihrem Unternehmen, damit Ihr KI-Assistent Sie bestmoeglich repraesentieren kann."
   - Field labels: Keep German simple and warm:
     - "Business Name" → "Name Ihres Unternehmens"
     - "Business Description" → "Beschreibung"
     - "Business Hours" → "Oeffnungszeiten"
     - "Services Offered" → "Ihre Dienstleistungen"
   - Placeholders: German examples (e.g., "z.B. Friseur Schmidt", "Mo-Fr 9-18 Uhr, Sa 9-14 Uhr")
   - Hints: Add helpful German hints explaining WHY each field matters

3. **knowledge-step.tsx** - Localize:
   - Title: "Knowledge Base" → "Wissen fuer Ihren Assistenten"
   - Subtitle: Explain that FAQs help the agent answer common questions
   - Button text: "Generate with AI" → "Mit KI generieren"
   - Labels and hints in German

4. **greeting-step.tsx** - Localize:
   - Title: "Greeting & Messages" → "Begruessung & Verabschiedung"
   - Field labels and hints in German
   - Button: "Generate with AI" → "Mit KI generieren"

5. **review-step.tsx** - Localize:
   - Title: "Review & Create" → "Uebersicht & Erstellen"
   - Section headers in German
   - "Ready to create!" message in German
   - Update voiceProviderName to "ElevenLabs" (currently hardcoded "Azure")

Use warm, conversational tone - not corporate/formal. Follow voice-step.tsx patterns established in Phase 20.
  </action>
  <verify>npm run build succeeds, no TypeScript errors</verify>
  <done>All wizard steps display German text with warm, conversational tone. No English UI text remains except code identifiers.</done>
</task>

<task type="auto">
  <name>Task 2: Improve AI prompts for "herzlich" tone and business-specific FAQs</name>
  <files>src/lib/openrouter.ts</files>
  <action>
Update generateWizardContent and generateGreetingOnly functions with improved prompts:

1. **System prompt improvements:**
   - Add explicit instruction for "herzlich" (warm) tone
   - Distinguish from "förmlich" (stiff/formal) - explain what to avoid
   - Add German business culture context

2. **FAQ generation improvements:**
   - Add instruction to analyze business type from description and services
   - Generate FAQs specific to business category:
     - Restaurant/Gastro: Reservierungen, Speisekarte, Allergien, Parken
     - Friseur/Salon: Termine, Preise, Wartezeit, Produkte
     - Arztpraxis/Klinik: Termine, Wartezeit, Unterlagen, Rezepte
     - Handwerker: Anfahrt, Kosten, Dauer, Notdienst
     - Default: Öffnungszeiten, Standort, Preise, Dienstleistungen
   - Make answers conversational - as if speaking on phone, not reading documentation

3. **Greeting generation improvements:**
   - Add examples of warm vs formal greetings
   - Ensure greeting sounds natural when spoken aloud
   - Add instruction to make end call message genuinely friendly

4. **Prompt structure:**
   Update the user prompt to include:
   ```
   TONFALL: Herzlich und einladend, aber professionell. Nicht steif oder bürokratisch.

   Beispiel herzlich: "Gerne helfe ich Ihnen weiter! Bei uns können Sie..."
   Beispiel zu förmlich: "Wir bitten Sie zur Kenntnis zu nehmen, dass..."

   Analysiere den Unternehmenstyp aus der Beschreibung und den Dienstleistungen,
   und generiere branchenspezifische FAQs.
   ```

Preserve existing JSON output structure. Do not change function signatures or API contract.
  </action>
  <verify>npm run build succeeds, no TypeScript errors in openrouter.ts</verify>
  <done>AI prompts updated with "herzlich" tone guidance and business-type analysis for FAQ generation.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>German-localized wizard with improved AI-generated content quality</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000/dashboard/agents/new
    3. Check each wizard step for German labels:
       - Step 1: "Ihr Unternehmen" with German field labels and hints
       - Step 2: "Wissen & FAQs" with German labels
       - Step 3: "Stimme" (already German from Phase 20)
       - Step 4: "Begruessung" with German labels
       - Step 5: "Uebersicht" with German section headers
    4. Test AI generation:
       - Enter a restaurant business (e.g., "Ristorante Bella", Italian restaurant description)
       - Click "Mit KI generieren" on Knowledge step
       - Verify FAQs are restaurant-specific (Reservierungen, Speisekarte, etc.)
       - Verify tone is warm ("Gerne...", "Bei uns...") not formal ("Wir bitten Sie...")
    5. Confirm: No English text visible in UI, content feels "herzlich" and business-specific
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] All wizard steps display German text
- [ ] AI-generated FAQs are business-type specific
- [ ] AI tone is "herzlich" (warm) not "förmlich" (stiff)
- [ ] No TypeScript or linting errors
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Wizard feels like a friendly guide, not a technical form
- AI-generated content reflects specific business type
- Phase 21 complete, ready for Phase 22 (Euro Currency)
</success_criteria>

<output>
After completion, create `.planning/phases/21-wizard-polish/21-01-SUMMARY.md`:

# Phase 21 Plan 1: Wizard Polish Summary

**[Substantive one-liner - what shipped]**

## Accomplishments
- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified
- `path/to/file.ts` - Description
- `path/to/another.ts` - Description

## Decisions Made
[Key decisions and rationale, or "None"]

## Issues Encountered
[Problems and resolutions, or "None"]

## Next Step
Phase complete, ready for Phase 22 (Euro Currency)
</output>
