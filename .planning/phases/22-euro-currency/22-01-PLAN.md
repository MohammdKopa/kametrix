---
phase: 22-euro-currency
plan: 1
type: execute
---

<objective>
Change all currency displays from $ (USD) to € (EUR) throughout the platform.

Purpose: Complete German market localization by using Euro as the currency symbol.
Output: All user-facing price displays show € instead of $, with no mixed currencies anywhere.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-euro-currency/22-CONTEXT.md

**Scope from CONTEXT.md:**
- Simple symbol swap: $ → €
- No price value changes (if $10, becomes €10)
- No number format changes (keep 1,234.56 format)
- No currency conversion logic

**Files to modify:**

1. `src/lib/credits-utils.ts` - Central formatting functions (formatBalance, formatCallCost, getGraceUsageMessage)
2. `src/components/dashboard/credit-pack-card.tsx` - formatPrice function, grace settlement text
3. `src/components/dashboard/credit-balance.tsx` - formatCredits function
4. `src/components/dashboard/call-row.tsx` - formatCredits function
5. `src/components/dashboard/transaction-list.tsx` - formatCredits function
6. `src/app/(dashboard)/admin/users/[id]/page.tsx` - creditDollars/graceDollars display
7. `src/app/(dashboard)/admin/settings/page.tsx` - Rate display
8. `src/app/(dashboard)/dashboard/credits/page.tsx` - Grace credits and rate display

**Pattern to follow:**
- Replace `$` with `€` in template literals and string concatenations
- Keep number formatting unchanged (toFixed(2), etc.)
- Update comments that reference $ to reference €
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update credits-utils.ts formatting functions</name>
  <files>src/lib/credits-utils.ts</files>
  <action>
Update all currency formatting to use € instead of $:

1. Update comments referencing $ pricing (lines 8, 20, 22, 23, 49, 62, 66, 77)
2. Change formatBalance return from `$${dollars}` to `€${dollars}` (line 57)
3. Change formatCallCost return from `$${cost}` to `€${cost}` (line 72)
4. Change getGraceUsageMessage from `$${dollars}` to `€${dollars}` (line 119)

Keep all number formatting (toFixed(2)) exactly the same.
  </action>
  <verify>grep -n "\\$" src/lib/credits-utils.ts shows no remaining $ currency symbols (only template literal syntax like ${variable})</verify>
  <done>All formatting functions return € instead of $, comments updated to reference Euro</done>
</task>

<task type="auto">
  <name>Task 2: Update dashboard components</name>
  <files>src/components/dashboard/credit-pack-card.tsx, src/components/dashboard/credit-balance.tsx, src/components/dashboard/call-row.tsx, src/components/dashboard/transaction-list.tsx</files>
  <action>
Update formatCredits/formatPrice functions in each file:

1. **credit-pack-card.tsx:**
   - Line 31: Change formatPrice return from `$${...}` to `€${...}`
   - Line 34: Update comment from `$0.15/min` to `€0.15/min`
   - Line 114: Change grace settlement text from `$${...}` to `€${...}`
   - Line 120: Change grace balance text from `$${...}` to `€${...}`

2. **credit-balance.tsx:**
   - Line 14: Change formatCredits return from `$${...}` to `€${...}`

3. **call-row.tsx:**
   - Line 61: Change formatCredits return from `$${...}` to `€${...}`

4. **transaction-list.tsx:**
   - Line 28: Change formatCredits return from `$${...}` to `€${...}`
  </action>
  <verify>grep -rn '"\$\${' src/components/dashboard/{credit-pack-card,credit-balance,call-row,transaction-list}.tsx returns no matches</verify>
  <done>All dashboard component currency displays show € instead of $</done>
</task>

<task type="auto">
  <name>Task 3: Update admin and credits pages</name>
  <files>src/app/(dashboard)/admin/users/[id]/page.tsx, src/app/(dashboard)/admin/settings/page.tsx, src/app/(dashboard)/dashboard/credits/page.tsx</files>
  <action>
Update currency displays in admin and credits pages:

1. **admin/users/[id]/page.tsx:**
   - Line 201: Change from `$${creditDollars}` to `€${creditDollars}`
   - Line 207: Change from `$${graceDollars}` to `€${graceDollars}`

2. **admin/settings/page.tsx:**
   - Line 101: Change from `$ ${(centsPerMinute / 100).toFixed(2)}/min` to `€${(centsPerMinute / 100).toFixed(2)}/min`

3. **dashboard/credits/page.tsx:**
   - Line 107: Change grace credits display from `$${...}` to `€${...}`
   - Line 150: Change rate display from `$${...}` to `€${...}`
  </action>
  <verify>grep -rn '"\$' src/app/\(dashboard\)/admin/users/\[id\]/page.tsx src/app/\(dashboard\)/admin/settings/page.tsx src/app/\(dashboard\)/dashboard/credits/page.tsx | grep -v "\\${" returns no currency $ symbols</verify>
  <done>All admin and credits page currency displays show € instead of $</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] No TypeScript errors
- [ ] grep -rn '"\$[0-9]' src/ returns no matches (no hardcoded $X.XX prices)
- [ ] grep -rn "'\$" src/ returns no currency $ symbols in strings
- [ ] All € symbols render correctly (UTF-8 encoding)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Every user-facing $ symbol changed to €
- No mixed currencies anywhere in the platform
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/22-euro-currency/22-01-SUMMARY.md`:

# Phase 22 Plan 1: Euro Currency Summary

**[One-liner describing what was changed]**

## Accomplishments

- [List of key changes]

## Files Modified

- `path/to/file.ts` - Description

## Decisions Made

None - straightforward symbol replacement.

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 22 complete. v2.1 Prompt & Voice Excellence milestone complete.
</output>
