---
phase: 10-landing-legal
plan: 01
type: execute
---

<objective>
Set up GDPR-compliant cookie consent and German legal pages (Impressum, Datenschutz).

Purpose: Establish German legal compliance foundation before launching public-facing pages.
Output: Working cookie consent banner with German translations, complete Impressum and Datenschutzerklärung pages with voice AI data processing disclosure.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-landing-legal/10-RESEARCH.md
@.planning/phases/10-landing-legal/10-CONTEXT.md

**From RESEARCH.md - Standard Stack:**
- vanilla-cookieconsent v3.1.0 for GDPR cookie consent
- Static Next.js pages for legal content

**From RESEARCH.md - Don't Hand-Roll:**
- Cookie consent UI - use vanilla-cookieconsent (handles GDPR requirements correctly)
- Consent persistence - library handles automatic cookie management

**From RESEARCH.md - Common Pitfalls to Avoid:**
- Reference "§ 5 DDG" (not TMG - changed May 2024)
- Include voice AI data processing section in Datenschutzerklärung
- Use equalWeightButtons: true for GDPR compliance (Accept/Reject equally prominent)

**Relevant source files:**
@src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install and configure cookie consent component</name>
  <files>package.json, src/components/cookie-consent/CookieConsent.tsx, src/components/cookie-consent/config.ts</files>
  <action>
1. Install vanilla-cookieconsent: `npm install vanilla-cookieconsent@3.1.0`

2. Create src/components/cookie-consent/config.ts with German translations:
   - guiOptions: layout "box", position "bottom left", equalWeightButtons: true
   - categories: necessary (enabled, readOnly), analytics (autoClear for _ga cookies)
   - German translations for consentModal and preferencesModal
   - Footer links to /impressum and /datenschutz

3. Create src/components/cookie-consent/CookieConsent.tsx:
   - "use client" directive (required for useEffect)
   - Import CSS from vanilla-cookieconsent/dist/cookieconsent.css
   - Run CookieConsent.run(config) in useEffect
   - Return null (UI rendered by library)

Use RESEARCH.md code examples as reference. Ensure equalWeightButtons: true for GDPR compliance.
  </action>
  <verify>Files created, no TypeScript errors: npx tsc --noEmit</verify>
  <done>Cookie consent component ready with German config, GDPR-compliant button styling</done>
</task>

<task type="auto">
  <name>Task 2: Create Impressum and Datenschutz legal pages</name>
  <files>src/app/(marketing)/impressum/page.tsx, src/app/(marketing)/datenschutz/page.tsx, src/app/(marketing)/layout.tsx</files>
  <action>
1. Create marketing route group: src/app/(marketing)/layout.tsx
   - Simple layout wrapper with dark theme
   - No auth required (public pages)

2. Create src/app/(marketing)/impressum/page.tsx:
   - Reference "§ 5 DDG" (NOT TMG - law changed May 2024)
   - Use placeholder format [PLACEHOLDER] for company details user must fill:
     - Company name + legal form (GmbH, UG, etc.)
     - Full physical address (no PO box)
     - Email address (mandatory)
     - Phone (optional)
     - Managing directors
     - Handelsregister + HRB number
     - USt-IdNr (VAT ID)
     - Verantwortlich für den Inhalt nach § 18 Abs. 2 MStV
   - Use prose styling for readable legal text

3. Create src/app/(marketing)/datenschutz/page.tsx:
   - Standard DSGVO sections: Verantwortlicher, Betroffenenrechte, Cookies
   - CRITICAL: Add "Verarbeitung von Sprachdaten" section for voice AI:
     - Call recordings and transcripts
     - Caller phone number, date, time, duration
     - Legal basis: Art. 6 Abs. 1 lit. b DSGVO (contract)
     - Auftragsverarbeiter: Vapi Inc. (USA), Google LLC (USA)
     - Datenübermittlung in Drittländer (Standardvertragsklauseln)
     - Speicherdauer: [PLACEHOLDER] days
   - Add Stripe payment processing section
   - Reference TDDDG for cookies (not TTDSG - renamed May 2024)

Use RESEARCH.md code examples for structure. Mark all company-specific details as [PLACEHOLDER].
  </action>
  <verify>Pages accessible at /impressum and /datenschutz, no build errors: npm run build</verify>
  <done>Both legal pages created with correct legal references (DDG, TDDDG), voice AI data processing disclosed, placeholders marked</done>
</task>

<task type="auto">
  <name>Task 3: Integrate cookie consent into root layout</name>
  <files>src/app/layout.tsx</files>
  <action>
1. Import CookieConsentBanner component in root layout

2. Add CookieConsentBanner inside body, after children:
   ```tsx
   <body>
     <ThemeProvider>{children}</ThemeProvider>
     <CookieConsentBanner />
   </body>
   ```

3. Change html lang from "en" to "de" for German market

4. Update metadata description for German: "KI-Telefonassistenten für kleine Unternehmen"
  </action>
  <verify>Dev server shows cookie banner on page load: npm run dev, visit localhost:3000</verify>
  <done>Cookie consent banner appears on all pages, German text displays correctly, Accept/Reject buttons equally prominent</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Cookie consent banner appears on localhost:3000
- [ ] Banner has "Alle akzeptieren" and "Nur notwendige" buttons with equal prominence
- [ ] /impressum page loads with proper legal structure
- [ ] /datenschutz page loads with voice AI data processing section
- [ ] Legal references use DDG and TDDDG (not TMG/TTDSG)
</verification>

<success_criteria>
- Cookie consent installed and configured with German translations
- Impressum page with all mandatory DDG § 5 fields (placeholders for company details)
- Datenschutzerklärung with voice AI data processing disclosure
- Cookie banner integrated in root layout
- All pages accessible and build passes
</success_criteria>

<output>
After completion, create `.planning/phases/10-landing-legal/10-01-SUMMARY.md`
</output>
