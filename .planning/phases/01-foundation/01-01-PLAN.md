---
phase: 01-foundation
plan: 01
type: execute
---

<objective>
Set up Next.js 15 project with TypeScript, Tailwind CSS, and Prisma ORM connected to PostgreSQL.

Purpose: Establish the foundational project structure that all subsequent phases build upon.
Output: Working Next.js app with database connection, ready for schema definition.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Constraints:**
- Tech stack: Next.js 15 + TypeScript + Tailwind CSS
- Database: PostgreSQL (self-hosted, not serverless)
- No Vercel-specific features (self-hosted deployment)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js 15 project</name>
  <files>package.json, tsconfig.json, tailwind.config.ts, postcss.config.js, next.config.ts, src/app/layout.tsx, src/app/page.tsx, src/app/globals.css, .gitignore, .env.example</files>
  <action>
    Run `npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*"` to initialize in current directory.

    After initialization:
    1. Update package.json name to "kametrix"
    2. Clean up src/app/page.tsx to a minimal "Kametrix" heading
    3. Clean up src/app/globals.css to keep only Tailwind directives
    4. Create .env.example with DATABASE_URL placeholder
    5. Add .env to .gitignore if not present

    Use Next.js 15 with App Router (not Pages Router).
  </action>
  <verify>
    - `npm run dev` starts without errors
    - Visit http://localhost:3000 shows "Kametrix" heading
    - `npm run build` completes successfully
  </verify>
  <done>Next.js 15 project initialized with TypeScript and Tailwind, dev server runs, build passes</done>
</task>

<task type="auto">
  <name>Task 2: Set up Prisma with PostgreSQL</name>
  <files>prisma/schema.prisma, src/lib/db.ts, .env.example</files>
  <action>
    1. Run `npm install prisma --save-dev` and `npm install @prisma/client`
    2. Run `npx prisma init` to create prisma/schema.prisma
    3. Update schema.prisma datasource to use postgresql provider
    4. Create src/lib/db.ts with singleton Prisma client pattern:
       - Use global variable to prevent multiple instances in dev
       - Export `db` as the Prisma client instance
    5. Update .env.example with DATABASE_URL format: `postgresql://user:password@localhost:5432/kametrix`

    Do NOT run prisma generate yet (no models defined).
  </action>
  <verify>
    - prisma/schema.prisma exists with postgresql datasource
    - src/lib/db.ts exports Prisma client
    - No TypeScript errors: `npx tsc --noEmit`
  </verify>
  <done>Prisma installed and configured, db client singleton created, .env.example documents DATABASE_URL</done>
</task>

<task type="auto">
  <name>Task 3: Create base project structure</name>
  <files>src/lib/.gitkeep, src/components/.gitkeep, src/app/(auth)/layout.tsx, src/app/(dashboard)/layout.tsx, src/types/index.ts</files>
  <action>
    Create folder structure for the application:

    1. src/lib/ - Utility functions and shared code (db.ts already exists)
    2. src/components/ - Reusable UI components
    3. src/types/index.ts - Shared TypeScript types (empty for now, will be populated)
    4. src/app/(auth)/ - Route group for auth pages (login, register)
       - Create layout.tsx with minimal centered layout for auth pages
    5. src/app/(dashboard)/ - Route group for authenticated dashboard
       - Create layout.tsx with placeholder for dashboard shell

    Route group layouts should be minimal placeholders that wrap {children}.
    Use Tailwind for basic centering/structure.
  </action>
  <verify>
    - All directories exist
    - `npm run build` passes
    - No TypeScript errors
  </verify>
  <done>Project structure created with route groups for auth and dashboard, ready for feature development</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run dev` starts without errors
- [ ] `npm run build` completes successfully
- [ ] `npx tsc --noEmit` shows no TypeScript errors
- [ ] prisma/schema.prisma exists with postgresql datasource
- [ ] src/lib/db.ts exports Prisma client singleton
- [ ] Route group directories exist: (auth) and (dashboard)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Project runs in development mode
- Build succeeds
- Ready for database schema definition in Plan 01-02
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
