---
phase: 06-polish-launch
plan: 03
type: execute
---

<objective>
Verify the complete end-to-end flow works reliably and fix any issues discovered.

Purpose: Ensure MVP is rock-solid before launch - every step from signup to receiving a call works flawlessly.
Output: Verified working system, any bugs fixed, v1.0 ready for production.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-polish-launch/06-CONTEXT.md

**Success criteria from PROJECT.md:**
- End-to-end flow works: signup → create agent → assign phone number → receive test call
- Agent successfully books appointments to connected Google Calendar
- Agent can answer questions based on configured business info
- Credit purchase and deduction system works correctly
- User can manage their agent, view call history, and see credit balance
- Admin can manage all users, credits, phone numbers, and agents

**Prior phase summaries to reference if issues found:**
@.planning/phases/05-payments-credits/05-04-SUMMARY.md
@.planning/phases/04-google-integrations/04-02-SUMMARY.md
@.planning/phases/03-vapi-integration/03-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete user journey from signup to receiving a call</what-built>
  <how-to-verify>
    Test the full flow on your deployed instance:

    **1. Fresh User Signup**
    - Visit /register with a new email
    - Complete registration
    - Confirm: Redirected to dashboard, welcome email received (check logs if SMTP not configured)

    **2. Create Voice Agent**
    - Click "Create Agent"
    - Use a template OR build custom with business info
    - Save agent
    - Confirm: Agent appears in list with "No phone" status

    **3. Connect Google Calendar**
    - Go to Settings/Integrations
    - Connect Google account
    - Confirm: Calendar shows as connected

    **4. Assign Phone Number**
    - Agent should auto-assign a number if pool has available numbers
    - OR admin assigns number manually
    - Confirm: Agent shows phone number

    **5. Make Test Call**
    - Call the assigned phone number
    - Talk to the agent, test:
      - Answering a business question
      - Booking an appointment
    - Confirm: Call completes, appears in call history

    **6. Verify Call Logging**
    - Check call history shows the test call
    - Verify call details (duration, status, summary if available)
    - If Google Sheets connected, verify call logged there

    Report any issues found or type "approved" if all steps pass.
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe specific issues</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Credit purchase and usage flow</what-built>
  <how-to-verify>
    Test the payments system:

    **1. Check Initial Balance**
    - View credit balance on dashboard
    - Note current balance

    **2. Purchase Credits**
    - Go to Credits page
    - Select a credit pack
    - Complete Stripe Checkout (use test card 4242 4242 4242 4242)
    - Confirm: Redirected back, balance increased, transaction in history

    **3. Use Credits (Make Call)**
    - Make another test call to your agent
    - Call for at least 1 minute
    - Confirm: Credits deducted after call ends

    **4. Low Balance Warning (if testable)**
    - If balance is below $5 after calls:
      - Confirm: Dashboard shows warning banner
      - Confirm: Low credit email sent (check logs)
    - If balance still above $5: Skip this check

    **5. Admin Credit Adjustment**
    - Log in as admin
    - Find the test user
    - Adjust credits (add or remove)
    - Confirm: User balance updated correctly

    Report any issues found or type "approved" if all steps pass.
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe specific issues</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Fix issues and final polish</name>
  <files>Various - depends on issues found</files>
  <action>
    Based on issues reported in previous checkpoints:
    1. Analyze each reported issue
    2. Identify root cause
    3. Implement fix
    4. Verify fix resolves the issue

    If NO issues reported (both checkpoints approved):
    1. Run `npm run build` to ensure clean build
    2. Run `npm run lint` to check for any warnings
    3. Review any TypeScript warnings and fix if critical
    4. Verify /api/health endpoint works

    Final checks:
    - All API routes respond appropriately
    - No console errors in browser
    - No unhandled errors in server logs
  </action>
  <verify>npm run build succeeds, npm run lint has no errors</verify>
  <done>All reported issues fixed, build clean, ready for production</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] User signup → agent creation → phone assignment → call flow works
- [ ] Credit purchase and deduction works correctly
- [ ] Low balance warnings display appropriately
- [ ] Google Calendar booking works
- [ ] All builds pass without errors
- [ ] No critical bugs remaining
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Both checkpoint verifications approved
- No blocking issues remaining
- v1.0 MVP ready for production launch
</success_criteria>

<output>
After completion, create `.planning/phases/06-polish-launch/06-03-SUMMARY.md`

This is the final plan of Phase 6 and the v1.0 MVP milestone.
Mark Phase 6 as complete in ROADMAP.md.
</output>
